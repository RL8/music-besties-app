let{createApp:e,reactive:t,toRefs:a}=Vue,app=e({setup(){let e=t({savedData:{},currentSelectionOrders:{},activeTabId:"eras",currentScreen:"dashboard",isSaveModalVisible:!1,isSidebarVisible:!1,currentSidebarTabId:null,currentSidebarView:"rankings",isReviewEditorVisible:!1,dashboardGridContainer:null,tabButtonsContainer:null,tabPanelsContainer:null,sidebarTitleContainer:null,sidebarChipContainer:null,sidebarTabButtonReview:null,reviewDisplayArea:null,reviewDisplayStars:null,reviewDisplayComment:null,reviewEditorEraName:null,reviewEditorCommentInput:null,reviewEditorCommentCharCount:null,reviewEditorRatingInputs:null,reviewEditorRatingDescription:null});function r(e){return JSON.parse(JSON.stringify(e))}function n(t){c(),e.currentScreen=t,"dashboard"===t?i():"edit"===t&&(e.currentSelectionOrders={},Object.keys(e.savedData).forEach(t=>{Array.isArray(e.savedData[t])?e.currentSelectionOrders[t]=r(e.savedData[t]):"object"==typeof e.savedData[t]&&e.savedData[t]?.selection&&(e.currentSelectionOrders[t]=r(e.savedData[t].selection))}),setTimeout(()=>{e.tabButtonsContainer.innerHTML="",e.tabPanelsContainer.innerHTML="",S("eras","Eras",erasWithSongs.map(e=>e.name),!0),erasWithSongs.forEach(e=>{S(e.id,e.name,e.songs)}),Object.keys(e.currentSelectionOrders).forEach(e=>{g(e)}),Object.keys(e.currentSelectionOrders).forEach(e=>{h(e),g(e)}),w("eras",!0)},0))}function i(){e.dashboardGridContainer&&(e.dashboardGridContainer.innerHTML="",d("eras","Eras",eraNamesInOrder.length),erasWithSongs.forEach(e=>{d(e.id,e.name,e.songs.length)}))}function s(e){let t="";return 1===e?t='<span class="emoji">\uD83D\uDC51</span>':2===e?t='<span class="emoji">\uD83E\uDD48</span>':3===e&&(t='<span class="emoji">\uD83E\uDD49</span>'),`<span class="chip-rank-indicator">${t}${e}</span>`}function d(t,a,r){let n=document.createElement("div");n.className="dashboard-grid-card no-hover-highlight",n.dataset.tabId=t,n.setAttribute("role","button"),n.setAttribute("tabindex","0");let i=e.savedData[t],d=("eras"===t?i?.length:i?.selection?.length)||0,l=("eras"!==t?i?.rating:0)||0,c=eraEmojis[t]||eraEmojis[a]||"",u=-1,b="",m='<span class="dashboard-stars">&nbsp;</span>';if("eras"!==t){let t=(e.savedData.eras||[]).indexOf(a);-1!==t&&(u=t+1,b=`<div class="dashboard-rank-indicator-wrapper">${s(u)}</div>`),l>0&&(m=`<span class="dashboard-stars">${"★".repeat(l)}${"☆".repeat(5-l)}</span>`)}n.dataset.rank=u>0?u:"",d>0&&n.classList.add("selected"),d===MAX_SELECTION&&n.classList.add("all-selected"),n.innerHTML=`
                ${b}
                <span class="card-title"><span class="emoji">${c}</span>${a}</span>
                <span class="card-count">${d} of ${r}</span>
                ${m}
            `,n.addEventListener("click",o),n.addEventListener("keydown",e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),o(e))}),e.dashboardGridContainer.appendChild(n)}function o(t){let a=t.currentTarget,r=a.dataset.tabId,n=a.dataset.rank;r&&function(t,a=""){e.currentSidebarTabId=t,e.isSidebarVisible=!0;let r=erasWithSongs.find(e=>e.id===t||e.name===t),n="eras"===t?"Eras":r?.name||"Rankings",i=eraEmojis[t]||eraEmojis[n]||"",d=`<span class="emoji">${i}</span>`;d+=`<span class="sidebar-title title-text">${n}</span>`,"eras"!==t&&a&&(d+=s(parseInt(a,10))),e.sidebarTitleContainer.innerHTML=d,e.sidebarChipContainer.innerHTML="";let o="eras"===t?eraNamesInOrder:originalSongLists[t]||[],l=("eras"===t?e.savedData.eras:e.savedData[t]?.selection)||[],c=[],m=[];if(o.forEach(e=>{l.includes(e)||m.push(e)}),l.forEach(e=>c.push(e)),m.forEach(e=>c.push(e)),c.forEach(t=>{let a=document.createElement("div");a.className="sidebar-chip";let r=l.indexOf(t);-1!==r&&(a.classList.add("selected"),a.innerHTML=s(r+1)),a.appendChild(document.createTextNode(t)),e.sidebarChipContainer.appendChild(a)}),"eras"!==t&&e.savedData[t]){let a=e.savedData[t].rating||0,r=e.savedData[t].comment||"";e.reviewDisplayStars.innerHTML=a>0?"★".repeat(a)+"☆".repeat(5-a):"",e.reviewDisplayStars.classList.toggle("unrated",0===a),e.reviewDisplayComment.textContent=r,0!==a||r?(e.reviewDisplayArea.contains(e.reviewDisplayStars)||e.reviewDisplayArea.prepend(e.reviewDisplayStars),e.reviewDisplayArea.contains(e.reviewDisplayComment)||e.reviewDisplayArea.appendChild(e.reviewDisplayComment)):e.reviewDisplayArea.innerHTML='<p class="no-review">No review yet.</p>',e.sidebarTabButtonReview.classList.remove("hidden"),b()}else e.sidebarTabButtonReview.classList.add("hidden");u("sidebar-panel-rankings")}(r,n)}function l(){e.isSaveModalVisible=!1}function c(){e.isSidebarVisible=!1,e.currentSidebarTabId=null}function u(t){e.currentSidebarView=t.replace("sidebar-panel-","")}function b(){e.reviewDisplayArea.classList.remove("hidden"),document.getElementById("edit-review-btn").classList.remove("hidden"),document.getElementById("review-editor-form").classList.add("hidden"),e.isReviewEditorVisible=!1}function m(t){e.reviewEditorRatingDescription.textContent=RATING_DESCRIPTIONS[t]||" "}function p(){let t=e.reviewEditorCommentInput.value.length;e.reviewEditorCommentCharCount.textContent=`${t} / ${COMMENT_MAX_LENGTH}`}function v(){let t=e.currentSelectionOrders[e.activeTabId]||[];console.log(`Selection order for ${e.activeTabId}:`,t)}function g(t){let a=document.getElementById(`tab-button-${t}`);if(!a)return;let r=a.querySelector(".tab-count"),n=parseInt(a.dataset.totalTags||"0",10),i=(e.currentSelectionOrders[t]||[]).length;r&&(r.textContent=`${i} of ${n}`)}function h(t){let a=document.getElementById(`panel-${t}`);if(!a)return;let r=a.querySelector(".chip-container");if(!r)return;let n=e.currentSelectionOrders[t]||[],i=Array.from(r.querySelectorAll(".chip")),s=[],d=[];i.forEach(e=>{n.includes(e.dataset.tag)?s.push(e):d.push(e)}),s.sort((e,t)=>n.indexOf(e.dataset.tag)-n.indexOf(t.dataset.tag));let o="eras"===t?eraNamesInOrder:originalSongLists[t]||[];d.sort((e,t)=>o.indexOf(e.dataset.tag)-o.indexOf(t.dataset.tag)),r.innerHTML="",s.forEach(e=>r.appendChild(e)),d.forEach(e=>r.appendChild(e)),y(t)}function y(t){let a=document.getElementById(`panel-${t}`);if(!a)return;let r=a.querySelector(".chip-container");if(!r)return;let n=r.querySelectorAll(".chip"),i=e.currentSelectionOrders[t]||[],d=i.length>=MAX_SELECTION;n.forEach(e=>{let t=e.dataset.tag,a=i.indexOf(t);if(e.innerHTML="",e.classList.remove("disabled","opacity-50","cursor-not-allowed","pointer-events-none"),-1!==a){let r=a+1;e.innerHTML=s(r),e.appendChild(document.createTextNode(t)),e.setAttribute("aria-checked","true"),e.dataset.rank=r,e.classList.add("bg-blue-500","text-white","border-blue-500"),e.classList.remove("border-gray-300","bg-gray-100","text-gray-700")}else e.appendChild(document.createTextNode(t)),e.setAttribute("aria-checked","false"),delete e.dataset.rank,e.classList.add("border-gray-300","bg-gray-100","text-gray-700"),e.classList.remove("bg-blue-500","text-white","border-blue-500"),d?(e.classList.add("disabled","opacity-50","cursor-not-allowed","pointer-events-none"),e.classList.remove("bg-gray-100","border-gray-300","text-gray-700"),e.classList.add("bg-gray-100","border-gray-200","text-gray-400")):(e.classList.remove("bg-gray-100","border-gray-200","text-gray-400"),e.classList.add("bg-gray-100","border-gray-300","text-gray-700"))})}function E(t){t.preventDefault();let a=t.currentTarget,r=a.dataset.tag,n=a.closest(".chip-container"),i=n?.dataset.tabId;if(!i||a.classList.contains("disabled"))return;e.currentSelectionOrders[i]||(e.currentSelectionOrders[i]=[]);let s=e.currentSelectionOrders[i];if(s.includes(r))e.currentSelectionOrders[i]=s.filter(e=>e!==r);else{if(s.length>=MAX_SELECTION)return void alert(`You can only select up to ${MAX_SELECTION} items for this tab.`);s.push(r)}h(i),g(i),v()}function f(e){if(e.currentTarget.classList.contains("disabled"))return void e.preventDefault();(" "===e.key||"Enter"===e.key)&&(e.preventDefault(),E(e))}function w(t,a=!1){if(!a&&e.activeTabId===t)return;let r=document.getElementById(`tab-button-${e.activeTabId}`),n=document.getElementById(`panel-${e.activeTabId}`);r&&(r.classList.remove("active","border-blue-500","bg-blue-50","text-blue-600","font-semibold"),r.classList.add("border-transparent","text-gray-500"),r.setAttribute("aria-selected","false")),n&&n.classList.add("hidden");let i=document.getElementById(`tab-button-${t}`),s=document.getElementById(`panel-${t}`);i&&(i.classList.add("active","border-blue-500","bg-blue-50","text-blue-600","font-semibold"),i.classList.remove("border-transparent","text-gray-500"),i.setAttribute("aria-selected","true"),i.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})),s&&s.classList.remove("hidden"),e.activeTabId=t,v()}function S(t,a,r,n=!1){let i=document.createElement("button");i.className=`tab-button no-hover-highlight flex flex-col items-center whitespace-nowrap py-2 px-2 border-b-2 font-medium text-sm ${n?"active border-blue-500 bg-blue-50 text-blue-600 font-semibold":"border-transparent text-gray-500"}`,i.dataset.tabTarget=`#panel-${t}`,i.dataset.totalTags=r.length,i.setAttribute("role","tab"),i.setAttribute("aria-controls",`panel-${t}`),i.setAttribute("aria-selected",n?"true":"false"),i.id=`tab-button-${t}`;let s=document.createElement("span");s.textContent=a,i.appendChild(s);let d=document.createElement("span");d.className="tab-count text-xs text-gray-400 mt-1";let o=(e.currentSelectionOrders[t]||[]).length;d.textContent=`${o} of ${r.length}`,i.appendChild(d),i.addEventListener("click",()=>w(t)),e.tabButtonsContainer.appendChild(i);let l=document.createElement("div");l.id=`panel-${t}`,l.className=`tab-panel ${n?"":"hidden"}`,l.setAttribute("role","tabpanel"),l.setAttribute("aria-labelledby",`tab-button-${t}`);let c="eras"===t?"Select up to 3 Eras:":`Select up to 3 Songs from ${a}:`;l.innerHTML=`
                <h2 class="text-lg font-semibold text-gray-700 mb-4">${c}</h2>
                <div class="chip-container flex flex-wrap gap-3 mb-6" data-tab-id="${t}"></div>
            `,e.tabPanelsContainer.appendChild(l),function(e,t){let a=document.getElementById(`panel-${e}`);if(!a)return;let r=a.querySelector(".chip-container");r&&(r.innerHTML="",("eras"===e?eraNamesInOrder:originalSongLists[e]||[]).forEach(e=>{let t=document.createElement("div");t.className="chip no-hover-highlight border border-gray-300 bg-gray-100 text-gray-700 text-sm font-medium rounded-full cursor-pointer transition-colors",t.dataset.tag=e,t.setAttribute("role","checkbox"),t.setAttribute("aria-checked","false"),t.setAttribute("tabindex","0"),t.addEventListener("touchstart",E,{passive:!1}),t.addEventListener("click",E),t.addEventListener("keydown",f),r.appendChild(t)}),y(e))}(t,0)}return{...a(e),showScreen:n,showSaveConfirmModal:function(){e.isSaveModalVisible=!0},hideSaveConfirmModal:l,saveAndExit:function(){(function(){try{return Object.keys(e.currentSelectionOrders).forEach(t=>{"eras"===t?e.savedData.eras=r(e.currentSelectionOrders.eras):e.savedData[t]&&(e.savedData[t].selection=r(e.currentSelectionOrders[t]||[]))}),localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(e.savedData)),console.log("Rankings saved:",e.savedData),!0}catch(e){return console.error("Failed to save rankings:",e),alert("Error saving rankings!"),!1}})()&&(l(),n("dashboard"))},closeSidebar:c,switchSidebarTab:u,showReviewEditor:function(){if(!e.currentSidebarTabId||"eras"===e.currentSidebarTabId)return;let t=e.savedData[e.currentSidebarTabId],a=erasWithSongs.find(t=>t.id===e.currentSidebarTabId);if(!t||!a)return;e.reviewDisplayArea.classList.add("hidden"),document.getElementById("edit-review-btn").classList.add("hidden"),document.getElementById("review-editor-form").classList.remove("hidden"),e.isReviewEditorVisible=!0,e.reviewEditorEraName.textContent=a.name;let r=t.rating||0;e.reviewEditorRatingInputs.forEach(e=>{e.checked=parseInt(e.value,10)===r}),m(r),e.reviewEditorCommentInput.value=t.comment||"",p()},hideReviewEditor:b,saveReview:function(){if(!e.currentSidebarTabId||"eras"===e.currentSidebarTabId)return;let t=document.querySelector('#review-editor-form .star-rating input[name="review-editor-rating"]:checked'),a=t?parseInt(t.value,10):0,r=e.reviewEditorCommentInput.value.trim();try{return e.savedData[e.currentSidebarTabId].rating=a,e.savedData[e.currentSidebarTabId].comment=r,localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(e.savedData)),e.reviewDisplayStars.innerHTML=a>0?"★".repeat(a)+"☆".repeat(5-a):"",e.reviewDisplayStars.classList.toggle("unrated",0===a),e.reviewDisplayComment.textContent=r,0!==a||r?(e.reviewDisplayArea.contains(e.reviewDisplayStars)||e.reviewDisplayArea.prepend(e.reviewDisplayStars),e.reviewDisplayArea.contains(e.reviewDisplayComment)||e.reviewDisplayArea.appendChild(e.reviewDisplayComment)):e.reviewDisplayArea.innerHTML='<p class="no-review">No review yet.</p>',b(),i(),!0}catch(t){return console.error(`Failed to save review for ${e.currentSidebarTabId}:`,t),alert("Error saving review!"),!1}},onMounted(){e.dashboardGridContainer=document.getElementById("dashboard-grid"),e.tabButtonsContainer=document.getElementById("tab-buttons"),e.tabPanelsContainer=document.getElementById("tab-panels"),e.sidebarTitleContainer=document.getElementById("sidebar-title-container"),e.sidebarChipContainer=document.getElementById("sidebar-chip-container"),e.sidebarTabButtonReview=document.getElementById("sidebar-tab-button-review"),e.reviewDisplayArea=document.getElementById("review-display-area"),e.reviewDisplayStars=document.getElementById("review-display-stars"),e.reviewDisplayComment=document.getElementById("review-display-comment"),e.reviewEditorEraName=document.getElementById("review-editor-era-name"),e.reviewEditorCommentInput=document.getElementById("review-editor-comment-input"),e.reviewEditorCommentCharCount=document.getElementById("review-editor-comment-char-count"),e.reviewEditorRatingInputs=document.querySelectorAll('#review-editor-form .star-rating input[name="review-editor-rating"]'),e.reviewEditorRatingDescription=document.getElementById("review-editor-rating-description"),e.reviewEditorCommentInput?.addEventListener("input",p),e.reviewEditorRatingInputs?.forEach(e=>{e.addEventListener("change",e=>{m(parseInt(e.target.value,10))})});try{let t=localStorage.getItem(LOCAL_STORAGE_KEY);e.savedData=t?JSON.parse(t):{},e.savedData.eras||(e.savedData.eras=[]),erasWithSongs.forEach(t=>{e.savedData[t.id]?void 0===e.savedData[t.id].selection&&(e.savedData[t.id]={selection:[],rating:e.savedData[t.id].rating||0,comment:e.savedData[t.id].comment||""}):e.savedData[t.id]={selection:[],rating:0,comment:""}}),console.log("Data loaded:",e.savedData)}catch(t){console.error("Failed to load data:",t),e.savedData={eras:[]},erasWithSongs.forEach(t=>{e.savedData[t.id]={selection:[],rating:0,comment:""}})}n("dashboard")}}}});document.addEventListener("DOMContentLoaded",()=>{app.mount("#app")});
//# sourceMappingURL=music-besties-skeleton.664050eb.js.map
